extends ../layout
block content
  .container
    h1.main-title= comp_info.title

    .comp_info.show
      if comp_info.img
        img.img-fluid(src= comp_info.img)
      include _comp_info

      .buttons
        if currentUser
          button.btn.btn-primary.comp_info-like-btn(data-id=comp_info.id)
            span #[i.fa.fa-thumbs-up] 좋아요
          if comp_info.author && comp_info.author.id == currentUser.id
            | 
            a.btn.btn-outline-secondary(href=`/comp_infos/${comp_info.id}/edit`) 수정
            | 
            a.btn.btn-outline-danger.need-confirm-btn(href=`/comp_infos/${comp_info.id}?_method=delete`) 삭제
            | &nbsp;
            a.btn.btn-outline-dark(href=`/comp_infos/${comp_info._id}/favorite`) 즐겨찾기

    //-include _facebookShare
      
    if comp_info.numComments > 0
      hr
      h3 #{comp_info.numComments} 개의 댓글
      .comments.show
        each comment in comments
          include _comment

    if currentUser
      form(action=`/comp_infos/${comp_info.id}/comments`, method='POST')
        .form-group
          label(for='comment') 댓글
          textarea.form-control(name="content", rows="5")
        button.btn.btn-primary(type="submit") 등록

  script(src='/javascripts/comp_info_client.js') 
  script(src='/javascripts/share.js')